App.factory("Api",["$q",function(r){var e="https://test.sendsay.ru/admin/api/";return{_prepeareRequest:function(r){return{request:JSON.stringify(r),apiversion:100,json:1}},hasError:function(r){return isD(r.errors)&&r.errors.length},request:function(t,n){n=n||{};var s=this,o=r.defer(),a=this._prepeareRequest(t),i={url:e,crossDomain:!0,async:!0,cache:!1,dataType:"json",global:!0,method:n.method||"post",data:a,error:function(r){_log("API ERROR: ",arguments)},success:function(r){s.hasError(r)?o.reject(r):o.resolve(r)}};return $.ajax(i),o.promise},login:function(r){return $http({method:"POST",url:e+"api/",data:{credential_0:r.login,credential_1:r.password}})}}}]);